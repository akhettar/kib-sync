{
	"_id": "gBRPeHUB1Z0EovIQPlfC",
	"_index": ".opendistro-alerting-config",
	"_score": 1,
	"_source": {
		"monitor": {
			"enabled": true,
			"enabled_time": 1604041260698,
			"inputs": [
				{
					"search": {
						"indices": [
							"cwl-marketplace-emea-prod*"
						],
						"query": {
							"query": {
								"bool": {
									"adjust_pure_negative": true,
									"boost": 1,
									"must": [
										{
											"match_phrase": {
												"@log_group": {
													"boost": 1,
													"query": "/ecs/vf-cm-prod-marketplace-emea-zalando-orders-process",
													"slop": 0,
													"zero_terms_query": "NONE"
												}
											}
										},
										{
											"query_string": {
												"auto_generate_synonyms_phrase_query": true,
												"boost": 1,
												"default_field": "payload.message",
												"default_operator": "or",
												"enable_position_increments": true,
												"escape": false,
												"fields": [],
												"fuzziness": "AUTO",
												"fuzzy_max_expansions": 50,
												"fuzzy_prefix_length": 0,
												"fuzzy_transpositions": true,
												"max_determinized_states": 10000,
												"phrase_slop": 0,
												"query": "(Error connecting to SFTP server) OR (Error saving\\/generating PDF) OR (Error while connecting to zalando to fetch zalando order number) OR (Error while generating invoice pdf) OR (Thread interrupted by another thread)",
												"type": "best_fields"
											}
										},
										{
											"query_string": {
												"auto_generate_synonyms_phrase_query": true,
												"boost": 1,
												"default_field": "metaData.priority",
												"default_operator": "or",
												"enable_position_increments": true,
												"escape": false,
												"fields": [],
												"fuzziness": "AUTO",
												"fuzzy_max_expansions": 50,
												"fuzzy_prefix_length": 0,
												"fuzzy_transpositions": true,
												"max_determinized_states": 10000,
												"phrase_slop": 0,
												"query": "(ERROR) OR (WARN)",
												"type": "best_fields"
											}
										},
										{
											"range": {
												"@timestamp": {
													"boost": 1,
													"format": "strict_date_optional_time",
													"from": "now-30m",
													"include_lower": true,
													"include_upper": true,
													"to": "now"
												}
											}
										}
									]
								}
							}
						}
					}
				}
			],
			"last_update_time": 1609753370520,
			"name": "PP - Zalando Invoice Processor",
			"schedule": {
				"period": {
					"interval": 29,
					"unit": "MINUTES"
				}
			},
			"schema_version": 1,
			"triggers": [
				{
					"actions": [
						{
							"destination_id": "lYdjCHQBm5zOLdVNN4TS",
							"id": "pZmTeHUBgaE_3YCbj5zs",
							"message_template": {
								"lang": "mustache",
								"source": " *{{ctx.monitor.name}} just entered alert status. Please investigate the orders below*\n\n{{#ctx.results.0.hits.hits}}\n- *Message*: {{_source.payload.message}}\n- *Order details*: [OcmAccountId: {{_source.payload.customData.ocmAccountId}} Brand: {{_source.payload.customData.Brand}}, Order ID: {{_source.payload.customData.orderId}}, Country: {{_source.payload.customData.Country}}]\n:eyes: \u003chttps://vpc-vf-sysint-emea-es-ir-jiqfwlmrnmrkm7ydovqpsvqueu.eu-west-1.es.amazonaws.com/_plugin/kibana/app/kibana#/discover/74bdb4f0-1dc3-11eb-8208-dbdc90e322f9?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:'{{_source.@timestamp}}',to:'{{_source.@timestamp}}'))\u0026_a=(columns:!(context.correlationId,payload.message,payload.customData.orders,payload.customData.total),filters:!(('$state':(store:appState),exists:(field:context.correlationId),meta:(alias:!n,disabled:!f,index:'37789dd0-dcbe-11ea-a74b-9338ed12b859',key:context.correlationId,negate:!f,type:exists,value:exists)),('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'37789dd0-dcbe-11ea-a74b-9338ed12b859',key:metaData.appName,negate:!f,params:(query:{{_source.metaData.appName}}),type:phrase,value:{{_source.metaData.appName}}),query:(match:(metaData.appName:(query:{{_source.metaData.appName}},type:phrase))))),index:'a8c2b5f0-b48e-11ea-83d4-bb6662d711ea',interval:auto,query:(language:kuery),sort:!(!('@timestamp',desc)))|Details\u003e\n----------------------------------------------------------------------------------------------------------------------------------------------------------------\n{{/ctx.results.0.hits.hits}}\n- Trigger: {{ctx.trigger.name}}\n- Severity: {{ctx.trigger.severity}}\n- Period start: {{ctx.periodStart}}\n- Period end: {{ctx.periodEnd}}\n"
							},
							"name": "Zalando Invoice Processor",
							"subject_template": {
								"lang": "mustache",
								"source": ":sos: *Zalando Invoice Processor Issue*"
							},
							"throttle_enabled": false
						}
					],
					"condition": {
						"script": {
							"lang": "painless",
							"source": "ctx.results[0].hits.total.value \u003e 0"
						}
					},
					"id": "pJmTeHUBgaE_3YCbj5zs",
					"name": "Zalando Invoice Creation ",
					"severity": "1"
				}
			],
			"type": "monitor",
			"ui_metadata": {
				"schedule": {
					"cronExpression": "0 */1 * * *",
					"daily": 0,
					"frequency": "interval",
					"monthly": {
						"day": 1,
						"type": "day"
					},
					"period": {
						"interval": 29,
						"unit": "MINUTES"
					},
					"timezone": null,
					"weekly": {
						"fri": false,
						"mon": false,
						"sat": false,
						"sun": false,
						"thur": false,
						"tue": false,
						"wed": false
					}
				},
				"search": {
					"aggregationType": "count",
					"bucketUnitOfTime": "h",
					"bucketValue": 1,
					"fieldName": "",
					"groupedOverFieldName": "bytes",
					"groupedOverTop": 5,
					"overDocuments": "all documents",
					"searchType": "query",
					"timeField": "",
					"where": {
						"fieldName": [],
						"fieldRangeEnd": 0,
						"fieldRangeStart": 0,
						"fieldValue": "",
						"operator": "is"
					}
				}
			}
		}
	},
	"_type": "_doc"
}