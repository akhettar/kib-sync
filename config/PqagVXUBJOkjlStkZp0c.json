{
	"_id": "PqagVXUBJOkjlStkZp0c",
	"_index": ".opendistro-alerting-config",
	"_score": 1,
	"_source": {
		"monitor": {
			"enabled": true,
			"enabled_time": 1603969501091,
			"inputs": [
				{
					"search": {
						"indices": [
							"cwl-cr-emea-prod*"
						],
						"query": {
							"query": {
								"bool": {
									"adjust_pure_negative": true,
									"boost": 1,
									"must": [
										{
											"match_phrase": {
												"@log_group": {
													"boost": 1,
													"query": "/ecs/vf-cm-prod-marketplace-emea-cr-orderoevent-monitor",
													"slop": 0,
													"zero_terms_query": "NONE"
												}
											}
										},
										{
											"query_string": {
												"auto_generate_synonyms_phrase_query": true,
												"boost": 1,
												"default_field": "payload.customData.store-id",
												"default_operator": "or",
												"enable_position_increments": true,
												"escape": false,
												"fields": [],
												"fuzziness": "AUTO",
												"fuzzy_max_expansions": 50,
												"fuzzy_prefix_length": 0,
												"fuzzy_transpositions": true,
												"max_determinized_states": 10000,
												"phrase_slop": 0,
												"query": "(S091)OR(S092)OR(S099)OR(S100)OR(S101)OR(S305)OR(S306)OR(S307)OR(S308)OR(S309)OR(S313)OR(S314)OR(S537)OR(S549)OR(S566)OR(S573)OR(S602)OR(S603)",
												"type": "best_fields"
											}
										},
										{
											"match": {
												"payload.message": {
													"auto_generate_synonyms_phrase_query": true,
													"boost": 1,
													"fuzzy_transpositions": true,
													"lenient": false,
													"max_expansions": 50,
													"operator": "OR",
													"prefix_length": 0,
													"query": "Missing inventory file",
													"zero_terms_query": "NONE"
												}
											}
										},
										{
											"range": {
												"@timestamp": {
													"boost": 1,
													"format": "strict_date_optional_time",
													"from": "now-30m",
													"include_lower": true,
													"include_upper": true,
													"to": "now"
												}
											}
										}
									]
								}
							}
						}
					}
				}
			],
			"last_update_time": 1608551918762,
			"name": "CR - Missing inventory file",
			"schedule": {
				"period": {
					"interval": 1,
					"unit": "HOURS"
				}
			},
			"schema_version": 1,
			"triggers": [
				{
					"actions": [
						{
							"destination_id": "UYRiCHQBnr12y3m86JZT",
							"id": "TKajVXUBJOkjlStkwp2i",
							"message_template": {
								"lang": "mustache",
								"source": " *{{ctx.monitor.name}} just entered alert status. Please investigate the orders below*\n\n{{#ctx.results.0.hits.hits}}\n- Store: {{_source.payload.customData.brand-name}} {{_source.payload.customData.store-id}} {{_source.payload.customData.store-name}}\n- Message:  {{_source.payload.message}}\n- Last found File:  *{{_source.payload.customData.last-file}}*\n :eyes: \u003chttps://vpc-vf-sysint-emea-es-ir-jiqfwlmrnmrkm7ydovqpsvqueu.eu-west-1.es.amazonaws.com/_plugin/kibana/app/kibana#/discover/74bdb4f0-1dc3-11eb-8208-dbdc90e322f9?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:'{{ctx.results.0.hits.hits.0._source.@timestamp}}',to:'{{ctx.results.0.hits.hits.0._source.@timestamp}}'))\u0026_a=(columns:!(metaData.priority,context.correlationId,payload.message,payload.customData.orders,payload.customData.total),filters:!(('$state':(store:appState),exists:(field:context.correlationId),meta:(alias:!n,disabled:!f,index:'37789dd0-dcbe-11ea-a74b-9338ed12b859',key:context.correlationId,negate:!f,type:exists,value:exists)),('$state':(store:appState),meta:(alias:!n,disabled:!f,index:'37789dd0-dcbe-11ea-a74b-9338ed12b859',key:metaData.appName,negate:!f,params:(query:{{ctx.results.0.hits.hits.0._source.metaData.appName}}),type:phrase,value:{{ctx.results.0.hits.hits.0._source.metaData.appName}}),query:(match:(metaData.appName:(query:{{ctx.results.0.hits.hits.0._source.metaData.appName}},type:phrase))))),index:'37789dd0-dcbe-11ea-a74b-9338ed12b859',interval:auto,query:(language:kuery),sort:!(!('@timestamp',desc)))|Details\u003e\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n{{/ctx.results.0.hits.hits}}\n- Severity: {{ctx.trigger.severity}}\n- Period start: {{ctx.periodStart}}\n- Period end: {{ctx.periodEnd}}\n"
							},
							"name": "Missing inventory file",
							"subject_template": {
								"lang": "mustache",
								"source": ":sos: *Missing inventory file*"
							},
							"throttle_enabled": false
						}
					],
					"condition": {
						"script": {
							"lang": "painless",
							"source": "ctx.results[0].hits.total.value \u003e 0"
						}
					},
					"id": "S6ajVXUBJOkjlStkwp2i",
					"name": "Missing inventory file trigger",
					"severity": "4"
				}
			],
			"type": "monitor",
			"ui_metadata": {
				"schedule": {
					"cronExpression": "0 */1 * * *",
					"daily": 0,
					"frequency": "interval",
					"monthly": {
						"day": 1,
						"type": "day"
					},
					"period": {
						"interval": 1,
						"unit": "HOURS"
					},
					"timezone": null,
					"weekly": {
						"fri": false,
						"mon": false,
						"sat": false,
						"sun": false,
						"thur": false,
						"tue": false,
						"wed": false
					}
				},
				"search": {
					"aggregationType": "count",
					"bucketUnitOfTime": "h",
					"bucketValue": 1,
					"fieldName": "",
					"groupedOverFieldName": "bytes",
					"groupedOverTop": 5,
					"overDocuments": "all documents",
					"searchType": "query",
					"timeField": "@timestamp",
					"where": {
						"fieldName": [],
						"fieldRangeEnd": 0,
						"fieldRangeStart": 0,
						"fieldValue": "",
						"operator": "is"
					}
				},
				"triggers": {
					"Missing inventory file trigger": {
						"enum": "ABOVE",
						"value": 10000
					}
				}
			}
		}
	},
	"_type": "_doc"
}